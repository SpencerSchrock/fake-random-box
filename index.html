<!DOCTYPE>

<html>
<head>
	<title>Fake Randomness Box!</title>
	<link rel="stylesheet" type="text/css" href="index.css">


</head>
<body>
<div class="container">
	<h2 text-align="center">Fake Randomness Box!</h2>
	<canvas id="myCanvas" width="300" height="300" style="border:1px solid #000000;"></canvas>
	<button id="btnRandomGen">Generate 7 dots</button>
	<button id="btnClear">Clear</button>

	<div>
		<span>rangeX: </span><span id="txtRangeX"></span>
		<br>
		<span>rangeY: </span><span id="txtRangeY"></span>
	</div>
</div>
</body>
</html>

<script>
var canvas = document.getElementById("myCanvas");
var ctx = canvas.getContext("2d");
var btnRandomGen = document.getElementById("btnRandomGen");
var btnClear = document.getElementById("btnClear");
var txtNumRand = document.getElementById("txtNumRand")
var num = 7;

var txtRangeX = document.getElementById("txtRangeX");
var txtRangeY = document.getElementById("txtRangeY");

// http://stackoverflow.com/a/18053642
function Dot(x, y) {
	this.x = x;
	this.y = y;
}

function DotList() {
	this.currDots = [];

	this.minX = canvas.width;
	this.minY = canvas.height;
	this.maxX = 0;
	this.maxY = 0; 

	this.insert = function(dot) {
		this.currDots.push(dot);
		this.minX = Math.min(this.minX, dot.x);
		this.minY = Math.min(this.minY, dot.y);
		this.maxX = Math.max(this.maxX, dot.x);
		this.maxY = Math.max(this.maxY, dot.y);
	}

	this.rangeX = function() {
		return this.maxX - this.minX;
	}

	this.rangeY = function() {
		return this.maxY - this.minY;
	}
}

var dotList = new DotList();


function drawDot(event) {
	var rect = canvas.getBoundingClientRect();
	var x = event.clientX - rect.left;
	var y = event.clientY - rect.top;
	dotList.insert(new Dot(x, y));
	ctx.fillRect(x, y, 5, 5);

	console.log("Add dot at " + x + ", " + y + "\n");
}

function randomFill() {
	for (var i = 0; i < num; i++) {
		var x = Math.random() * canvas.width;
		var y = Math.random() * canvas.height;

		dotList.insert(new Dot(x, y));
		ctx.fillRect(x, y, 5, 5);
		console.log("Add dot at " + x + ", " + y + "\n");
	}

	txtRangeX.textContent = dotList.rangeX();
	txtRangeY.textContent = dotList.rangeY();
}

function clear() {
	dotList = new DotList();
	ctx.clearRect(0, 0, canvas.width, canvas.height);
	console.log("Delete dots\n");

	txtRangeX.textContent = "";
	txtRangeY.textContent = "";
}

canvas.addEventListener('click', drawDot, false);
btnRandomGen.addEventListener('click', randomFill, false);
btnClear.addEventListener('click', clear, false);

</script>